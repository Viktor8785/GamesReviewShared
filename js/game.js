import{gamesData}from"./games-data.js";const mediaQueryMobileOnly=window.matchMedia("(max-width: 759px"),mediaQueryTabletOnly=window.matchMedia("(min-width: 760px)"),picture=[];picture[0]=document.querySelector("#img1"),picture[1]=document.querySelector("#img2"),picture[2]=document.querySelector("#img3");const cardContainer=document.querySelector(".game__card-container"),gameName=document.querySelector(".game__name"),gameGenre=document.querySelector(".game__genre"),gameText=document.querySelector(".game__text"),buttonBack=document.querySelector(".game__button-back"),buttonWatchlist=document.querySelector(".game__button-watchlist"),buttonSvg=document.querySelector(".game__button-svg"),buttonLeft=document.querySelector(".game__button-left"),buttonRight=document.querySelector(".game__button-right"),watchButton=document.querySelector("#watch-button");let urlParams=new URLSearchParams(window.location.search),param=urlParams.get("param"),game=gamesData.find((e=>e.id==param)),currentIndex=0,leftXMax=-374,leftXs=[],leftX=0;for(let e=0;e<3;e++)leftXs[e]=leftXMax*e;cardContainer.style.left=0;let watchList=localStorage.getItem("watch"),watchListFlag=!1;watchList&&watchList.indexOf(param)>=0&&(buttonSvg.classList.add("game__button-svg--active"),watchListFlag=!0);const gameImg1=picture[0].querySelector("img"),gameSource1=picture[0].querySelectorAll("source");gameImg1.src=game.imgMobile+"1.jpg",gameImg1.srcset=game.imgMobile+"1@2x.jpg 2x",gameImg1.alt=game.name,gameSource1[0].srcset=game.imgTablet+"1.webp 1x, "+game.imgTablet+"1@2x.webp 2x",gameSource1[1].srcset=game.imgMobile+"1.webp 1x, "+game.imgMobile+"1@2x.webp 2x",gameSource1[2].srcset=game.imgTablet+"1.jpg 1x, "+game.imgTablet+"1@2x.ipg 2x";const gameImg2=picture[1].querySelector("img"),gameSource2=picture[1].querySelectorAll("source");gameImg2.src=game.imgMobile+"2.jpg",gameImg2.srcset=game.imgMobile+"2@2x.jpg 2x",gameImg2.alt=game.name,gameSource2[0].srcset=game.imgTablet+"2.webp 1x, "+game.imgTablet+"2@2x.webp 2x",gameSource2[1].srcset=game.imgMobile+"2.webp 1x, "+game.imgMobile+"2@2x.webp 2x",gameSource2[2].srcset=game.imgTablet+"2.jpg 1x, "+game.imgTablet+"2@2x.ipg 2x";const gameImg3=picture[2].querySelector("img"),gameSource3=picture[2].querySelectorAll("source");function handleWidthChangeTablet(e){e.matches&&(leftXMax=-550,startSettings())}function handleWidthChangeMobile(e){e.matches&&(leftXMax=-374,startSettings())}function startSettings(){currentIndex=0;for(let e=0;e<3;e++)leftXs[e]=leftXMax*e;leftX=0,cardContainer.style.left=0}gameImg3.src=game.imgMobile+"3.jpg",gameImg3.srcset=game.imgMobile+"3@2x.jpg 2x",gameImg3.alt=game.name,gameSource3[0].srcset=game.imgTablet+"3.webp 1x, "+game.imgTablet+"3@2x.webp 2x",gameSource3[1].srcset=game.imgMobile+"3.webp 1x, "+game.imgMobile+"3@2x.webp 2x",gameSource3[2].srcset=game.imgTablet+"3.jpg 1x, "+game.imgTablet+"3@2x.ipg 2x",gameName.textContent=game.name,gameGenre.textContent=game.genre,gameText.textContent=game.text,handleWidthChangeMobile(mediaQueryMobileOnly),handleWidthChangeTablet(mediaQueryTabletOnly),buttonBack.addEventListener("click",(()=>{window.history.go(-1)})),buttonWatchlist.addEventListener("click",(()=>{buttonSvg.classList.toggle("game__button-svg--active"),watchList=localStorage.getItem("watch");let e="";if(watchListFlag)if(watchListFlag=!1,3==watchList.length)e="";else{let t=watchList.indexOf(param);0==t&&(e=watchList.slice(watchList.indexOf(param)+3)),t==watchList.length-3&&(e=watchList.slice(0,watchList.indexOf(param))),t>0&&t<watchList.length-3&&(e=watchList.slice(0,watchList.indexOf(param))+watchList.slice(watchList.indexOf(param)+3))}else e=param+" ",watchList&&watchList.length>0&&(e=watchList+param+" "),watchListFlag=!0;localStorage.setItem("watch",e)})),buttonLeft.addEventListener("click",(()=>{currentIndex>0&&(currentIndex--,leftX=leftXs[currentIndex],cardContainer.style.left=leftX+"px")})),buttonRight.addEventListener("click",(()=>{currentIndex<2&&(currentIndex++,leftX=leftXs[currentIndex],cardContainer.style.left=leftX+"px")})),watchButton.addEventListener("click",(()=>{watchButton.href="games.html?param=watch"})),mediaQueryTabletOnly.addEventListener("change",handleWidthChangeTablet),mediaQueryMobileOnly.addEventListener("change",handleWidthChangeMobile);